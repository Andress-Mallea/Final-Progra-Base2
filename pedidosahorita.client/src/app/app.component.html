<style>
  /* Estilos generales */
  body {
    font-family: Arial, sans-serif;
    margin: 0;
    padding: 0;
    background-color: black;
    color: #333;
  }

  .container {
    width: 80%;
    margin: auto;
    overflow: hidden;
  }

  /* Estilos del encabezado */
  header {
    background: #333;
    color: #fff;
    padding-top: 30px;
    min-height: 70px;
    border-bottom: 3px solid #e8491d;
  }

  header a {
    color: #fff;
    text-decoration: none;
    text-transform: uppercase;
  }

  header ul {
    margin: 0;
    padding: 0;
  }

  header li {
    float: left;
    display: inline;
    padding: 0 20px 0 20px;
  }

  header #branding {
    float: left;
  }

  header #branding h1 {
    margin: 0;
  }

  header nav {
    float: right;
    margin-top: 10px;
    /* Clear float of search-bar if it's placed before nav in HTML */
    clear: right;
  }

  header .highlight,
  header .current a {
    color: #e8491d;
    font-weight: bold;
  }

  header a:hover {
    color: #ccc;
    font-weight: bold;
  }

  /* Estilos de la sección principal */
  #showcase {
    min-height: 400px;
    background: black;
    text-align: center;
    color: #fff;
  }

  #showcase h1 {
    margin-top: 100px;
    font-size: 55px;
    margin-bottom: 10px;
  }

  #showcase p {
    font-size: 20px;
  }

  /* Estilos del pie de página */
  footer {
    padding: 20px;
    color: #fff;
    background-color: #e8491d;
    text-align: center;
  }
    #product-list {
    padding: 20px;
    display: flex;
    flex-wrap: wrap;
    justify-content: space-around;
    background-color: #f4f4f4; /* Fondo claro para la sección de productos */
    color: #333; /* Color de texto oscuro para contraste */
  }

  .product-item {
    width: 30%;
    margin-bottom: 20px;
    padding: 20px; /* Aumenta el padding para un mejor aspecto */
    border: 1px solid #ddd;
    border-radius: 5px;
    text-align: center;
    background-color: #fff; /* Fondo blanco para cada tarjeta de producto */
    box-shadow: 0 2px 5px rgba(0,0,0,0.1); /* Sombra suave para efecto de elevación */
    display: flex;
    flex-direction: column;
    justify-content: space-between; /* Distribuye el espacio entre el contenido y el botón */
  }

  .product-item img {
    max-width: 100%;
    height: auto;
    margin-bottom: 15px; /* Espacio debajo de la imagen */
  }

  .product-item h3 {
    font-size: 1.5em; /* Aumenta el tamaño del título */
    margin-top: 10px;
    margin-bottom: 5px;
    color: #333;
  }

  .product-item p {
    font-size: 1em;
    color: #666;
    margin-bottom: 15px; /* Espacio debajo de la descripción */
    flex-grow: 1; /* Permite que la descripción ocupe el espacio restante */
  }

  .product-item .product-price {
    font-size: 1.3em;
    font-weight: bold;
    color: #e8491d; /* Color del precio similar al highlight */
    margin-bottom: 15px;
  }

  /* Contenedor para los botones de acción del producto */
  .product-actions {
    display: flex;
    justify-content: center;
    gap: 10px;
    margin-top: 15px;
  }

  .product-item .add-to-cart-button,
  .product-item .description-button {
    background-color: #e8491d;
    color: white;
    border: none;
    padding: 10px 15px;
    border-radius: 5px;
    cursor: pointer;
    font-size: 1.1em;
    transition: background-color 0.3s ease;
    flex-grow: 1;
  }

  .product-item .add-to-cart-button:hover,
  .product-item .description-button:hover {
    background-color: #c63d17;
  }

  .product-item .description-button {
    padding: 8px 12px;
    font-size: 0.9em;
  }


  /* Estilos de la barra de búsqueda */
  .search-bar {
    float: right;
    margin-top: 15px;
    margin-right: 10px;
    position: relative;
    display: flex;
    align-items: center;
    width: 1000px;
  }

  .search-bar input[type="text"] {
    padding: 7px 12px 7px 35px;
    border-radius: 5px;
    border: 1px solid #666;
    background-color: #333;
    color: white;
    font-size: 1em;
    width: 100%;
  }

  .search-bar i {
    position: absolute;
    left: 10px;
    color: #fff;
    font-size: 1em;
  }

  /* Estilos para el área de acciones de usuario (iconos y botones) */
  .user-action-area {
    float: right;
    margin-top: 10px;
    clear: both;
  }

  .user-action-area ul {
    list-style: none;
    margin: 0;
    padding: 0;
    display: inline-block;
  }

  .user-action-area ul li {
    float: left;
    display: inline-block;
    padding: 0 10px;
    font-size: 1.1em;
  }

  .user-action-area ul li a {
    text-transform: none;
    font-weight: normal;
  }

  .user-action-area ul li a:hover {
    color: #e8491d;
  }

  /* Estilos para el botón de vender dentro del user-action-area */
  .user-action-area .sell-button {
    background-color: #e8491d;
    color: white;
    border: none;
    padding: 8px 15px;
    border-radius: 5px;
    cursor: pointer;
    font-size: 1em;
    margin-left: 20px;
    float: left;
  }

  .user-action-area .sell-button:hover {
    background-color: #c63d17;
  }

  /* Estilos para los enlaces de autenticación (debajo de otros) */
  .auth-links-list {
    clear: both;
    float: right;
    margin-top: 10px;
  }

  /* Estilos para el menú del carrito */
  #shopping-cart-menu {
    background-color: #2a2a2a;
    color: #fff;
    padding: 20px;
    margin: 20px auto;
    width: 80%;
    border-radius: 8px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
  }

  #shopping-cart-menu h2 {
    text-align: center;
    color: #e8491d;
    margin-bottom: 20px;
  }

  #shopping-cart-menu ul {
    list-style: none;
    padding: 0;
  }

  #shopping-cart-menu ul li {
    background-color: #3e3e3e;
    margin-bottom: 10px;
    padding: 15px;
    border-radius: 5px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: 1.1em;
  }

  #shopping-cart-menu ul li .item-details {
    flex-grow: 1;
  }

  #shopping-cart-menu ul li .item-actions button {
    background-color: #e8491d;
    color: white;
    border: none;
    padding: 8px 12px;
    border-radius: 5px;
    cursor: pointer;
    margin-left: 10px;
    font-size: 0.9em;
  }

  #shopping-cart-menu ul li .item-actions button:hover {
    background-color: #c63d17;
  }

  #shopping-cart-menu .buy-button-container {
    text-align: center;
    margin-top: 30px;
  }

  #shopping-cart-menu .buy-button {
    background-color: #4CAF50;
    color: white;
    border: none;
    padding: 12px 25px;
    border-radius: 5px;
    cursor: pointer;
    font-size: 1.2em;
    transition: background-color 0.3s ease;
  }

  #shopping-cart-menu .buy-button:hover {
    background-color: #45a049;
  }

  /* Estilos para el menú de venta */
  #sell-product-menu {
    background-color: #2a2a2a;
    color: #fff;
    padding: 20px;
    margin: 20px auto;
    width: 80%;
    border-radius: 8px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
  }

  #sell-product-menu h2 {
    text-align: center;
    color: #e8491d;
    margin-bottom: 20px;
  }

  #sell-product-menu .form-group {
    margin-bottom: 15px;
  }

  #sell-product-menu label {
    display: block;
    margin-bottom: 5px;
    font-weight: bold;
    color: #fff;
  }

  #sell-product-menu input[type="text"],
  #sell-product-menu textarea,
  #sell-product-menu input[type="number"],
  #sell-product-menu input[type="date"],
  #sell-product-menu select {
    width: calc(100% - 20px);
    padding: 10px;
    border-radius: 5px;
    border: 1px solid #666;
    background-color: #333;
    color: white;
    font-size: 1em;
  }

  #sell-product-menu textarea {
    resize: vertical;
    min-height: 80px;
  }

  #sell-product-menu button {
    background-color: #e8491d;
    color: white;
    border: none;
    padding: 12px 25px;
    border-radius: 5px;
    cursor: pointer;
    font-size: 1.2em;
    transition: background-color 0.3s ease;
    display: block;
    width: 100%;
    margin-top: 20px;
  }

  #sell-product-menu button:hover {
    background-color: #c63d17;
  }

  /* Estilos para el menú de detalle de producto */
  #product-detail-menu {
    background-color: #2a2a2a;
    color: #fff;
    padding: 30px;
    margin: 20px auto;
    width: 70%;
    border-radius: 8px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    text-align: left;
  }

  #product-detail-menu h2 {
    text-align: center;
    color: #e8491d;
    margin-bottom: 25px;
    font-size: 2.2em;
  }

  #product-detail-menu .detail-image {
    max-width: 100%;
    height: auto;
    border-radius: 8px;
    margin-bottom: 20px;
    display: block;
    margin-left: auto;
    margin-right: auto;
  }

  #product-detail-menu p {
    font-size: 1.1em;
    line-height: 1.6;
    margin-bottom: 15px;
    color: #ccc;
  }

  #product-detail-menu .detail-price {
    font-size: 1.8em;
    font-weight: bold;
    color: #e8491d;
    text-align: right;
    margin-top: 20px;
    margin-bottom: 20px;
  }

  #product-detail-menu .detail-actions {
    text-align: center;
    margin-top: 30px;
  }

  #product-detail-menu .detail-actions button {
    background-color: #e8491d;
    color: white;
    border: none;
    padding: 12px 25px;
    border-radius: 5px;
    cursor: pointer;
    font-size: 1.2em;
    transition: background-color 0.3s ease;
    margin: 0 10px;
  }

  #product-detail-menu .detail-actions button:hover {
    background-color: #c63d17;
  }

  /* Estilos para el menú de pago */
  #payment-menu {
    background-color: #2a2a2a;
    color: #fff;
    padding: 30px;
    margin: 20px auto;
    width: 80%;
    border-radius: 8px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    text-align: center;
  }

  #payment-menu h2 {
    color: #e8491d;
    margin-bottom: 30px;
  }

  .payment-options {
    margin-bottom: 30px;
  }

  .payment-options button {
    background-color: #3e3e3e;
    color: white;
    border: 1px solid #666;
    padding: 12px 25px;
    border-radius: 5px;
    cursor: pointer;
    font-size: 1.1em;
    margin: 0 10px;
    transition: background-color 0.3s ease, border-color 0.3s ease;
  }

  .payment-options button.active {
    background-color: #e8491d;
    border-color: #e8491d;
    font-weight: bold;
  }

  .payment-details {
    background-color: #3e3e3e;
    padding: 25px;
    border-radius: 8px;
    margin-bottom: 25px;
  }

  .payment-details h3 {
    color: #e8491d;
    margin-bottom: 20px;
  }

  .qr-code-image {
    max-width: 150px;
    height: auto;
    margin: 15px auto;
    display: block;
    border: 5px solid #fff;
  }

  .payment-details .form-group {
    margin-bottom: 15px;
    text-align: left;
  }

  .payment-details .form-group label {
    display: block;
    margin-bottom: 8px;
    color: #fff;
    font-weight: normal;
  }

  .payment-details .form-group input[type="text"],
  .payment-details .form-group input[type="number"],
  .payment-details .form-group input[type="date"],
  .payment-details .form-group input[type="email"],
  .payment-details .form-group input[type="password"] {
    width: calc(100% - 20px);
    padding: 10px;
    border-radius: 5px;
    border: 1px solid #666;
    background-color: #2a2a2a;
    color: white;
    font-size: 1em;
  }

  .form-group-inline {
    display: flex;
    gap: 20px;
  }

  .form-group-inline .form-group {
    flex: 1;
  }

  .total-amount {
    font-size: 1.5em;
    font-weight: bold;
    color: #e8491d;
    margin-top: 25px;
    text-align: right;
  }

  .payment-action-buttons button {
    margin: 0 10px;
    padding: 12px 30px;
    font-size: 1.1em;
    border-radius: 5px;
    cursor: pointer;
    transition: background-color 0.3s ease;
  }

  .payment-action-buttons .buy-button {
    background-color: #4CAF50;
    color: white;
    border: none;
  }

  .payment-action-buttons .buy-button:hover {
    background-color: #45a049;
  }

  .payment-action-buttons .back-button {
    background-color: #666;
    color: white;
    border: none;
  }

  .payment-action-buttons .back-button:hover {
    background-color: #555;
  }

  /* Estilos para el menú de Login y Registro */
  #login-menu, #register-menu, #user-profile-menu {
    background-color: #2a2a2a;
    color: #fff;
    padding: 30px;
    margin: 20px auto;
    width: 60%;
    border-radius: 8px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    text-align: center;
  }

  #login-menu h2, #register-menu h2, #user-profile-menu h2 {
    color: #e8491d;
    margin-bottom: 30px;
  }

  #login-menu .form-group, #register-menu .form-group, #user-profile-menu .profile-info-group {
    margin-bottom: 20px;
    text-align: left;
  }

  #login-menu label, #register-menu label, #user-profile-menu label {
    display: block;
    margin-bottom: 8px;
    font-weight: bold;
    color: #fff;
  }

  #login-menu input[type="email"], #login-menu input[type="password"],
  #register-menu input[type="text"], #register-menu input[type="email"],
  #register-menu input[type="password"], #register-menu input[type="date"],
  #register-menu input[type="number"], #register-menu select {
    width: calc(100% - 20px);
    padding: 10px;
    border-radius: 5px;
    border: 1px solid #666;
    background-color: #333;
    color: white;
    font-size: 1em;
  }

  #login-menu button, #register-menu button {
    background-color: #e8491d;
    color: white;
    border: none;
    padding: 12px 25px;
    border-radius: 5px;
    cursor: pointer;
    font-size: 1.2em;
    transition: background-color 0.3s ease;
    display: block;
    width: 100%;
    margin-top: 20px;
  }

  #login-menu button:hover, #register-menu button:hover {
    background-color: #c63d17;
  }

  /* Estilos específicos del menú de usuario */
  #user-profile-menu .profile-detail p {
    font-size: 1.1em;
    margin-bottom: 10px;
    color: #ccc;
  }

  #user-profile-menu .profile-detail strong {
    color: #e8491d;
  }

  #user-profile-menu .section-title {
    color: #e8491d;
    margin-top: 40px;
    margin-bottom: 20px;
    font-size: 1.8em;
    border-bottom: 1px solid #e8491d;
    padding-bottom: 10px;
  }

  #user-profile-menu .product-list-item {
    background-color: #3e3e3e;
    margin-bottom: 10px;
    padding: 15px;
    border-radius: 5px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: 1em;
  }

  #user-profile-menu .product-list-item .item-details {
    flex-grow: 1;
    text-align: left;
  }

  #user-profile-menu .product-list-item .item-details strong {
    color: #fff;
  }

  #user-profile-menu .logout-button {
    background-color: #dc3545;
    color: white;
    border: none;
    padding: 12px 25px;
    border-radius: 5px;
    cursor: pointer;
    font-size: 1.2em;
    transition: background-color 0.3s ease;
    margin-top: 30px;
    width: auto;
    display: inline-block;
  }

  #user-profile-menu .logout-button:hover {
    background-color: #c82333;
  }
</style>

<header>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <div class="container">
    <div id="branding">
      <h1>
        <span class="highlight">Pedidos</span>
        Ahorita
      </h1>
    </div>
    <!-- Navigation principal: Floats right and positions below the search bar if needed -->
    <nav>
      <ul>
        <li [class.current]="currentActiveLink === 'Inicio'"><a href="#" title="Inicio" (click)="setActiveLink('Inicio')"><i class="fas fa-home"></i> Inicio</a></li>
        <li [class.current]="currentActiveLink === 'Productos'"><a href="#" title="Productos" (click)="setActiveLink('Productos')"><i class="fas fa-box"></i> Productos</a></li>
        <!-- Shopping Cart with click to show/hide the menu -->
        <li [class.current]="currentActiveLink === 'Carrito'"><a href="#" title="Carrito de Compras" (click)="toggleShoppingCartMenu()"><i class="fas fa-shopping-cart"></i> Carrito ({{ cartItems.length }})</a></li>
        <li [class.current]="currentActiveLink === 'Vender'"><a href="#" title="Vender" (click)="setActiveLink('Vender')"><i class="fas fa-dollar-sign"></i> Vender</a></li>
        <li [class.current]="currentActiveLink === 'Mi Cuenta'"><a href="#" title="Mi Cuenta/Perfil" (click)="setActiveLink('Mi Cuenta')"><i class="fas fa-user-circle"></i> Mi Cuenta</a></li>
      </ul>
    </nav>

    <!-- User actions area: Floats right and positions below the main nav and search bar -->
    <div class="user-action-area">
      <!-- Bottom row: Login / Register - Conditionally displayed -->
      <ul class="auth-links-list" *ngIf="!loggedInUser">
        <li><a href="#" title="Iniciar Sesión" (click)="setActiveLink('Iniciar Sesion')"><i class="fas fa-sign-in-alt"></i> Iniciar Sesión</a></li>
        <li><a href="#" title="Registrarse" (click)="setActiveLink('Registrarse')"><i class="fas fa-user-plus"></i> Registrarse</a></li>
      </ul>
      <!-- Logout button - Displayed if user is logged in -->
      <ul class="auth-links-list" *ngIf="loggedInUser">
        <li><a href="#" title="Cerrar Sesión" (click)="logoutUser()"><i class="fas fa-sign-out-alt"></i> Cerrar Sesión</a></li>
      </ul>
    </div>
        <!-- Search bar: Floats right at the top -->
    <div class="search-bar">
      <i class="fas fa-search"></i> <!-- Icono de lupa -->
      <input type="text" placeholder="Buscar productos..." />
    </div>

  </div>
</header>

<section id="showcase">
  <div class="container">
    <h1>Los mejores productos al mejor precio</h1>
    <p>Encuentra todo lo que necesitas y más.</p>
  </div>
</section>

<!-- New Shopping Cart Menu - Visible only when currentActiveLink is 'Carrito' -->
<section id="shopping-cart-menu" class="container" *ngIf="currentActiveLink === 'Carrito' && !showPaymentMenu">
  <h2>Tu Carrito de Compras</h2>
  <ul *ngIf="cartItems.length > 0; else emptyCart">
    <li *ngFor="let item of cartItems">
      <div class="item-details">
        <strong>{{ item.name }}</strong> - ${{ item.price.toFixed(2) }}
      </div>
      <div class="item-actions">
        <button>Ver</button>
        <button (click)="removeFromCart(item)">Quitar</button>
      </div>
    </li>
  </ul>
  <ng-template #emptyCart>
    <p style="text-align: center; color: #ccc;">El carrito está vacío.</p>
  </ng-template>
  <div class="buy-button-container" *ngIf="cartItems.length > 0">
    <button class="buy-button" (click)="proceedToPayment()">Comprar Ahora</button>
  </div>
</section>

<!-- Sell Product Menu - Visible only when currentActiveLink === 'Vender' -->
<section id="sell-product-menu" class="container" *ngIf="currentActiveLink === 'Vender'">
  <h2>Subir un Nuevo Producto</h2>
  <form #sellForm="ngForm">
    <div class="form-group">
      <label for="productName">Nombre del Producto:</label>
      <input type="text" id="productName" name="newProductName" [(ngModel)]="newProductName" required>
    </div>
    <div class="form-group">
      <label for="productDescription">Descripción:</label>
      <textarea id="productDescription" name="newProductDescription" [(ngModel)]="newProductDescription" required></textarea>
    </div>
    <div class="form-group">
      <label for="productPrice">Precio:</label>
      <input type="number" id="productPrice" name="newProductPrice" [(ngModel)]="newProductPrice" min="0.01" step="0.01" required>
    </div>
    <div class="form-group">
      <label for="productImage">Imagen del Producto (URL):</label>
      <input type="text" id="productImage" name="newProductImage" [(ngModel)]="newProductImage">
    </div>
    <button type="submit" (click)="uploadProduct()" [disabled]="!sellForm.valid">Subir Producto</button>
  </form>
</section>

<!-- Product Detail Menu - Visible only when currentActiveLink === 'ProductDetail' and a product is selected -->
<section id="product-detail-menu" class="container" *ngIf="currentActiveLink === 'ProductDetail' && selectedProduct">
  <h2>{{ selectedProduct.name }}</h2>
  <img [src]="selectedProduct.image || 'https://placehold.co/600x400/cccccc/333333?text=' + selectedProduct.name" alt="{{ selectedProduct.name }}" class="detail-image">
  <p><strong>Descripción:</strong> {{ selectedProduct.description }}</p>
  <p class="detail-price">Precio: ${{ selectedProduct.price.toFixed(2) }}</p>
  <div class="detail-actions">
    <button (click)="addToCart(selectedProduct)">Agregar al Carrito</button>
    <button (click)="setActiveLink('Productos')">Volver a Productos</button>
  </div>
</section>

<!-- Payment Menu - Visible only when showPaymentMenu is true -->
<section id="payment-menu" class="container" *ngIf="showPaymentMenu">
  <h2>Selecciona tu Método de Pago</h2>
  <div class="payment-options">
    <button (click)="selectPaymentMethod('qr')" [class.active]="paymentMethod === 'qr'">
      <i class="fas fa-qrcode"></i> QR
    </button>
    <button (click)="selectPaymentMethod('card')" [class.active]="paymentMethod === 'card'">
      <i class="fas fa-credit-card"></i> Tarjeta
    </button>
  </div>

  <div class="payment-details">
    <div *ngIf="paymentMethod === 'qr'">
      <h3>Escanea para Pagar</h3>
      <img src="https://placehold.co/200x200/cccccc/333333?text=QR+Code" alt="QR Code" class="qr-code-image">
      <p>Escanea este código QR con tu aplicación de pago.</p>
    </div>

    <div *ngIf="paymentMethod === 'card'">
      <h3>Datos de la Tarjeta</h3>
      <form #cardForm="ngForm">
        <div class="form-group">
          <label for="cardNumber">Número de Tarjeta:</label>
          <input type="text" id="cardNumber" name="cardNumber" [(ngModel)]="cardNumber" placeholder="XXXX XXXX XXXX XXXX" required>
        </div>
        <div class="form-group">
          <label for="cardName">Nombre en la Tarjeta:</label>
          <input type="text" id="cardName" name="cardName" [(ngModel)]="cardName" placeholder="Nombre completo" required>
        </div>
        <div class="form-group-inline">
          <div class="form-group">
            <label for="cardExpiry">Fecha de Vencimiento:</label>
            <input type="text" id="cardExpiry" name="cardExpiry" [(ngModel)]="cardExpiry" placeholder="MM/AA" pattern="^(0[1-9]|1[0-2])\/?([0-9]{2})$" required>
          </div>
          <div class="form-group">
            <label for="cardCVC">CVC:</label>
            <input type="text" id="cardCVC" name="cardCVC" [(ngModel)]="cardCVC" placeholder="XXX" required>
          </div>
        </div>
        <p class="total-amount">Total a Pagar: ${{ getTotalCartAmount().toFixed(2) }}</p>
      </form>
    </div>
  </div>

  <div class="payment-action-buttons">
    <button class="buy-button" (click)="processPayment()" [disabled]="!paymentMethod">Pagar</button>
    <button class="back-button" (click)="closePaymentMenu()">Volver al Carrito</button>
  </div>
</section>

<!-- Login Menu - Visible only when currentActiveLink === 'Iniciar Sesion' -->
<section id="login-menu" class="container" *ngIf="currentActiveLink === 'Iniciar Sesion'">
  <h2>Iniciar Sesión</h2>
  <form #loginForm="ngForm" (ngSubmit)="loginUser()">
    <div class="form-group">
      <label for="loginEmail">Correo Electrónico:</label>
      <input type="email" id="loginEmail" name="loginEmail" [(ngModel)]="loginEmail" required>
    </div>
    <div class="form-group">
      <label for="loginPassword">Contraseña:</label>
      <input type="password" id="loginPassword" name="loginPassword" [(ngModel)]="loginPassword" required>
    </div>
    <button type="submit" [disabled]="!loginForm.valid">Iniciar Sesión</button>
  </form>
</section>

<!-- Register Menu - Visible only when currentActiveLink === 'Registrarse' -->
<section id="register-menu" class="container" *ngIf="currentActiveLink === 'Registrarse'">
  <h2>Registrarse</h2>
  <form #registerForm="ngForm" (ngSubmit)="registerUser()">
    <h3>Información Básica</h3>
    <div class="form-group">
      <label for="registerNombre">Nombre:</label>
      <input type="text" id="registerNombre" name="registerNombre" [(ngModel)]="registerNombre" required>
    </div>
    <div class="form-group">
      <label for="registerApellido">Apellido:</label>
      <input type="text" id="registerApellido" name="registerApellido" [(ngModel)]="registerApellido" required>
    </div>
    <div class="form-group">
      <label for="registerEmail">Correo Electrónico:</label>
      <input type="email" id="registerEmail" name="registerEmail" [(ngModel)]="registerEmail" required>
    </div>
    <div class="form-group">
      <label for="registerTelefono">Teléfono (Opcional):</label>
      <input type="text" id="registerTelefono" name="registerTelefono" [(ngModel)]="registerTelefono">
    </div>
    <div class="form-group">
      <label for="registerPassword">Contraseña:</label>
      <input type="password" id="registerPassword" name="registerPassword" [(ngModel)]="registerPassword" required>
    </div>
    <div class="form-group">
      <label for="registerConfirmPassword">Confirmar Contraseña:</label>
      <input type="password" id="registerConfirmPassword" name="registerConfirmPassword" [(ngModel)]="registerConfirmPassword" required>
    </div>

    <h3>Tipo de Usuario</h3>
    <div class="form-group">
      <label for="registerUserType">Soy:</label>
      <select id="registerUserType" name="registerUserType" [(ngModel)]="registerUserType">
        <option value="Cliente">Cliente</option>
        <option value="Empleado">Empleado</option>
        <option value="Vendedor">Vendedor / Dueño de Tienda</option>
      </select>
    </div>

    <!-- Campos condicionales para Cliente -->
    <div *ngIf="registerUserType === 'Cliente'">
      <h3>Datos de Cliente</h3>
      <div class="form-group">
        <label for="registerDireccion">Dirección:</label>
        <input type="text" id="registerDireccion" name="registerDireccion" [(ngModel)]="registerDireccion" required>
      </div>
      <div class="form-group">
        <label for="registerCiudad">Ciudad:</label>
        <input type="text" id="registerCiudad" name="registerCiudad" [(ngModel)]="registerCiudad" required>
      </div>
      <div class="form-group">
        <label for="registerCodigoPostal">Código Postal:</label>
        <input type="text" id="registerCodigoPostal" name="registerCodigoPostal" [(ngModel)]="registerCodigoPostal" required>
      </div>
    </div>

    <!-- Campos condicionales para Empleado -->
    <div *ngIf="registerUserType === 'Empleado'">
      <h3>Datos de Empleado</h3>
      <div class="form-group">
        <label for="registerFechaContratacion">Fecha de Contratación:</label>
        <input type="date" id="registerFechaContratacion" name="registerFechaContratacion" [(ngModel)]="registerFechaContratacion" required>
      </div>
      <div class="form-group">
        <label for="registerRolInterno">Rol Interno (Opcional):</label>
        <input type="text" id="registerRolInterno" name="registerRolInterno" [(ngModel)]="registerRolInterno">
      </div>
      <div class="form-group">
        <label for="registerSalario">Salario (Opcional):</label>
        <input type="number" id="registerSalario" name="registerSalario" [(ngModel)]="registerSalario" min="0">
      </div>
    </div>

    <!-- Campos condicionales para Vendedor -->
    <div *ngIf="registerUserType === 'Vendedor'">
      <h3>Datos de Tienda / Vendedor</h3>
      <div class="form-group">
        <label for="registerNombreTienda">Nombre de la Tienda:</label>
        <input type="text" id="registerNombreTienda" name="registerNombreTienda" [(ngModel)]="registerNombreTienda" required>
      </div>
      <div class="form-group">
        <label for="registerCuentaBanco">Cuenta de Banco (Opcional):</label>
        <input type="text" id="registerCuentaBanco" name="registerCuentaBanco" [(ngModel)]="registerCuentaBanco">
      </div>
    </div>

    <button type="submit" [disabled]="!registerForm.valid">Registrarse</button>
  </form>
</section>

<!-- User Profile Menu - Visible only when currentActiveLink === 'Mi Cuenta' and loggedInUser exists -->
<section id="user-profile-menu" class="container" *ngIf="currentActiveLink === 'Mi Cuenta' && loggedInUser as user">
  <h2>Perfil de Usuario: {{ user.Nombre }} {{ user.Apellido }}</h2>

  <div class="profile-detail">
    <p><strong>ID de Usuario:</strong> {{ user.UsuarioID }}</p>
    <p><strong>Email:</strong> {{ user.Email }}</p>
    <p *ngIf="user.Telefono"><strong>Teléfono:</strong> {{ user.Telefono }}</p>
    <p><strong>Tipo de Usuario:</strong> {{ user.userType }}</p>
    <p><strong>Miembro desde:</strong> {{ user.FechaDeRegistro | date:'mediumDate' }}</p>
    <p><strong>Estado:</strong> {{ user.Activo ? 'Activo' : 'Inactivo' }}</p>
  </div>

  <!-- Campos adicionales para Cliente -->
  <div *ngIf="user.userType === 'Cliente'">
    <h3 class="section-title">Datos de Cliente</h3>
    <div class="profile-detail">
      <p><strong>ID de Cliente:</strong> {{ user.ClienteID }}</p>
      <p *ngIf="user.Direccion"><strong>Dirección:</strong> {{ user.Direccion }}</p>
      <p *ngIf="user.Ciudad"><strong>Ciudad:</strong> {{ user.Ciudad }}</p>
      <p *ngIf="user.CodigoPostal"><strong>Código Postal:</strong> {{ user.CodigoPostal }}</p>
    </div>
  </div>

  <!-- Campos adicionales para Empleado -->
  <div *ngIf="user.userType === 'Empleado'">
    <h3 class="section-title">Datos de Empleado</h3>
    <div class="profile-detail">
      <p><strong>ID de Empleado:</strong> {{ user.EmpleadoID }}</p>
      <p *ngIf="user.FechaDeContratacion"><strong>Fecha de Contratación:</strong> {{ user.FechaDeContratacion | date:'mediumDate' }}</p>
      <p *ngIf="user.RolInterno"><strong>Rol Interno:</strong> {{ user.RolInterno }}</p>
      <p *ngIf="user.Salario"><strong>Salario:</strong> ${{ user.Salario?.toFixed(2) }}</p>
      <p *ngIf="user.FechaDeDespido"><strong>Fecha de Despido:</strong> {{ user.FechaDeDespido | date:'mediumDate' }}</p>
    </div>
  </div>

  <!-- Campos adicionales para Vendedor -->
  <div *ngIf="user.userType === 'Vendedor'">
    <h3 class="section-title">Datos de Tienda / Vendedor</h3>
    <div class="profile-detail">
      <p><strong>ID de Vendedor:</strong> {{ user.VendedorID }}</p>
      <p *ngIf="user.NombreDeTienda"><strong>Nombre de Tienda:</strong> {{ user.NombreDeTienda }}</p>
      <p *ngIf="user.CuentaDeBanco"><strong>Cuenta de Banco:</strong> {{ user.CuentaDeBanco }}</p>
    </div>
  </div>

  <!-- Productos que el usuario está vendiendo -->
  <h3 class="section-title">Productos que estás vendiendo ({{ sellingProducts.length }})</h3>
  <ul *ngIf="sellingProducts.length > 0; else noSellingProducts">
    <li *ngFor="let product of sellingProducts" class="product-list-item">
      <div class="item-details">
        <strong>{{ product.name }}</strong> - ${{ product.price.toFixed(2) }}
        <p>{{ product.description }}</p>
      </div>
    </li>
  </ul>
  <ng-template #noSellingProducts>
    <p style="text-align: center; color: #ccc;">No estás vendiendo ningún producto actualmente.</p>
  </ng-template>

  <!-- Productos que el usuario ha comprado -->
  <h3 class="section-title">Tus compras recientes ({{ purchasedProducts.length }})</h3>
  <ul *ngIf="purchasedProducts.length > 0; else noPurchasedProducts">
    <li *ngFor="let product of purchasedProducts" class="product-list-item">
      <div class="item-details">
        <strong>{{ product.name }}</strong> - ${{ product.price.toFixed(2) }}
        <p>{{ product.description }}</p>
      </div>
    </li>
  </ul>
  <ng-template #noPurchasedProducts>
    <p style="text-align: center; color: #ccc;">No has realizado ninguna compra.</p>
  </ng-template>

  <button class="logout-button" (click)="logoutUser()">Cerrar Sesión</button>
</section>


<!-- Product List - Visible only when currentActiveLink is 'Inicio' or 'Productos' -->
<section id="product-list" *ngIf="currentActiveLink === 'Inicio' || currentActiveLink === 'Productos'">
  <!-- The *ngFor directive is now applied to the product-item div -->
  <div class="product-item" *ngFor="let product of products">
    <!-- Placeholder image. You can replace with actual product images later. -->
    <img [src]="product.image || 'https://placehold.co/300x200/cccccc/333333?text=Producto'" alt="{{ product.name }}">
    <h3>{{ product.name }}</h3>
    <p>{{ product.description }}</p>
    <p class="product-price">${{ product.price.toFixed(2) }}</p>
    <div class="product-actions">
      <button class="add-to-cart-button" (click)="addToCart(product)">Agregar al carrito</button>
      <button class="description-button" (click)="viewProductDetail(product)">Descripción</button>
    </div>
  </div>
</section>

<footer>
  <p>Pedidos ahorita Progra exam &copy; 2025</p>
</footer>
